import{_ as N}from"./Category-531e00ef.js";import{$ as T,r,e as $,o as m,c as d,b,u as h,a as C,a0 as B,F as H}from"./index-c392db48.js";import{_ as j}from"./Breadcrumbs-d7526a11.js";import"./ClockIcon-e9c1dd80.js";const O={key:0,class:"flex justify-center"},L="77b4ae6d-a31f-4de5-a731-1249cd87eeff",U="1ddab218-5489-4891-8fbb-1c7061271dc8",J={__name:"DisplayRecipes",setup(D){const o=T().params.category;console.log(o);const y=r(localStorage.getItem("hairType")||""),g=r(localStorage.getItem("skinType")||""),v=r(localStorage.getItem("hairProblem")||""),_=r(localStorage.getItem("skinProblem")||""),k=JSON.parse(_.value),I=JSON.parse(v.value);function l(t,a){return t.push(a),t}const P=l(I,L),S=l(k,U),i=r([]),s=r([]);let n=1,e=9;function w(){n++,o==="cheveux"?s.value.length===e&&(e=9*n,u()):(i.value.length===e&&(e=9*n),p())}const x=$(()=>o==="cheveux"?(console.log(s.value.length),console.log({limit:e}),console.log(s.value.length>e),s.value.length>=e):i.value.length>=e);async function p(){const t=new URLSearchParams({physical_trait_id:`${g.value},b9f90678-ea3f-4fde-952f-a26a88e13259`,beauty_issue_id:S.join(","),limit:e});try{const a=`https://biocare-api-production.up.railway.app/api/recipe?${t}`,c=await(await fetch(a)).json();i.value=c,console.log(c)}catch(a){console.error(a)}}async function u(){const t=new URLSearchParams({physical_trait_id:`${y.value},c8898a24-04cb-4b1f-bb8b-38633aa3c670`,beauty_issue_id:P.join(","),limit:e});try{const a=`https://biocare-api-production.up.railway.app/api/recipe?${t}`,c=await(await fetch(a)).json();s.value=c,console.log(c)}catch(a){console.error(a)}}p(),u();const f=[{name:"Recettes",href:"/personal-space",current:!1},{name:o,href:`/recipe/${o.toLocaleLowerCase()}`,current:!0}];return console.log(f),(t,a)=>(m(),d(H,null,[b(j,{pages:f,class:"capitalize"}),b(N,{recipes:h(o)==="cheveux"?s.value:i.value,categoryName:h(o)},null,8,["recipes","categoryName"]),x.value?(m(),d("div",O,[C("button",{onClick:w,type:"button",class:"md:px-14 md:py-3 w-auto rounded-xl bg-[#8CD4E0] px-3 py-2 text-md font-bold shadow-sm hover:bg-[#1AB2CC] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"}," Afficher plus de recettes ")])):B("",!0)],64))}};export{J as default};
